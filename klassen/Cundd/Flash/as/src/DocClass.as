package {	import Cundd.Core.View;	import Cundd.Core.controllers.Cundd_Core_IndexController;	import Cundd.GraphicObject.UrlLoading.RectLazy;		import flash.display.MovieClip;	import flash.events.Event;	import flash.events.KeyboardEvent;	import flash.events.MouseEvent;	import flash.text.TextField;		import nl.demonsters.debugger.MonsterDebugger;			public class DocClass extends MovieClip{//		public var baseUrl:String = 'http://aaa/Music/Flash/';		public var baseUrl:String = 'http://aaa.cundd.net/Music/Flash/';		//internal var object:Cundd_Core_AbstractController;				/*		public var abc:Cundd_Core_IndexController;		public var tempoMat:Rect;		*/		public var tempofMat:RectLazy;		public var textfield:TextField;		/* */				public var container:View;		public var debugger:MonsterDebugger;		public var navCont:MovieClip;		public var controller:Cundd_Core_IndexController;						public function DocClass(){			this.debugger = new MonsterDebugger(this);			new CunddSystem(this);						CunddSystem.firebug('no')						this._initSearch();			this._initAlbumView();			this._addEventListeners();		}								protected function _initSearch(){			CunddSystem.firebug('msg'+this.searchMC.searchInput)			this.searchBtn.addEventListener(MouseEvent.CLICK,this.searchBtnFnc);						this.searchMC.searchInput.addEventListener(MouseEvent.CLICK,function(e){CunddSystem.firebug('clicked')});			this.searchMC.searchInput.addEventListener(KeyboardEvent.KEY_DOWN,this.keyPressInSearch);			// this.addEventListener(Event.ENTER_FRAME,this._checkIfTextFieldExists);		}				protected function _checkIfTextFieldExists(e:Event):void{			if(!this.hasOwnProperty('searchInput')){				this.searchMC.searchInput.addEventListener(MouseEvent.CLICK,function(e){CunddSystem.firebug('clicked')});				this.searchMC.searchInput.addEventListener(KeyboardEvent.KEY_DOWN,this.keyPressInSearch);			}		}						/**		 * 		 * @return 		 * 		 */		protected function _initAlbumView():void{			this.container = new View(new Array({'_cundd_drag_keepFillingScreen':true},{'_cundd_drag_needKey':'none'}));			this.addChildAt(this.container,0);							var requestString:String = this.baseUrl+'?artist=pink+floyd';						var cunddSystem:CunddSystem = new CunddSystem(this);			this.container.addChild(cunddSystem);			//this.container.mouseChildren = false;						this.controller = CunddSystem.getController('Core/Index');			this.controller.addEventListener(Event.COMPLETE,this.completeFnc);			CunddSystem.firebug(this.controller)			this.container.addChild(this.controller);					}								public function startController(para:String):void{			var requestString:String = this.baseUrl+'?artist='+para.replace(/ /g,'+');//+'&'+this.controller.setup.phpSessionId;;			CunddSystem.firebug(requestString);			//CunddSystem.firebug(this.controller)			this.controller.refresh(requestString);			return;		}								/**		 * 		 * @return 		 * 		 */		protected function _addEventListeners(){			this.navCont = this.navi.content;			this.navCont.addEventListener(Event.CHANGE,naviChanged);		}										/**		 * 		 * @param event		 * 		 */		public function naviChanged(event:Event):void{			var filter:String = '';			if(this.navCont.genre.state){				filter += 'genre+';			}			if(this.navCont.origin.state){				filter += 'origin+';			}			if(this.navCont.color.state){				filter += 'color+';			}			if(this.navCont.year.state){				filter += 'year+';			}			if(this.navCont.designer.state){				filter += 'designer';			}			var requestString:String = this.baseUrl+'?filter='+filter+'&'+this.controller.setup.phpSessionId;			CunddSystem.firebug(requestString);			this.controller.refresh(requestString);		}								public function completeFnc(event:Event):void{			CunddSystem.firebug('Complete');			this.changeStatusMsg(event);			//this.controller.addEventListeners(MouseEvent.CLICK,this.clickOnContainer);			return;		}								public function changeStatusMsg(event:Event){			this.statusMsg.text = this.controller.setup.statusString;		}						public function keyPressInSearch(event:KeyboardEvent):void{			// CunddSystem.firebug(event.keyCode)			if(event.keyCode == 13){ // If enter				this.startController(this.searchMC.searchInput.text);				this.removeChild(this.searchMC);			}		}								public function searchBtnFnc(event:MouseEvent):void{			this.addChild(this.searchMC);		}									}}